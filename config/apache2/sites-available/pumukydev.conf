<VirtualHost *:80>
    ServerAdmin webmaster@pumukydev.com
    ServerName pumukydev.com
    DocumentRoot /var/www/htdocs
    DirectoryIndex index.php
    ErrorLog ${APACHE_LOG_DIR}/error.log
    CustomLog ${APACHE_LOG_DIR}/access.log combined

    <Files "logo.png">
        ForceType application/octet-stream
        Header set Content-Disposition "attachment; filename=logo.png"
    </Files>

    <Directory "/var/www/htdocs/admin">
        AuthType Basic
        AuthName "Restricted Content"
        AuthUserFile /etc/apache2/.htpasswd
        Require valid-user
    </Directory>

    ErrorDocument 404 /errors/error404.php

    <Location "/status">
        AuthType Basic 
        AuthName "sysadmin"
        AuthUserFile /etc/apache2/.htpasswd
        SetHandler server-status
        Require user sysadmin
    </Location>

    Redirect permanent /status http://grafana.pumukydev.com/d/ae4u63vfbbzlsa/prueba2
</VirtualHost>

<VirtualHost *:80>
    ServerAdmin webmaster@pumukydev.com
    ServerName grafana.pumukydev.com

    ProxyPreserveHost On
    ProxyPass / http://localhost:3000/
    ProxyPassReverse / http://localhost:3000/

    # Redirigir tr√°fico a HTTPS
    #Redirect permanent / https://grafana.pumukydev.com/d/de4toyy0yzda8e/prueba
</VirtualHost>

<VirtualHost *:443>
    ServerAdmin webmaster@pumukydev.com
    ServerName pumukydev.com
    ServerAlias www.pumukydev.com grafana.pumukydev.com

    SSLEngine on
    SSLCertificateFile "certs/pumukydev.com_ssl_certificate.cer"
    SSLCertificateKeyFile "certs/_.pumukydev.com_private_key.key"

    DocumentRoot /var/www/htdocs

    <Directory /var/www/htdocs>
        AllowOverride All
        Require all granted
    </Directory>

    ErrorLog ${APACHE_LOG_DIR}/error.log
    CustomLog ${APACHE_LOG_DIR}/access.log combined
</VirtualHost>
